<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Quản lý sản phẩm</title>
    <link rel="stylesheet" href="assets/css/admin-style-new.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="admin-container">
        <header class="admin-header">
            <div class="admin-nav">
                <h1>Admin Panel - NKD Trung Auto</h1>
                <div class="admin-actions">
                    <span id="admin-welcome">Xin chào, Admin!</span>
                    <button onclick="goToHomePage()" class="home-btn">
                        <i class="fas fa-home"></i> Trang chủ
                    </button>
                    <button onclick="logout()" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Đăng xuất
                    </button>
                </div>
            </div>
        </header>

        <main class="admin-main">
            <div class="admin-sidebar">
                <nav class="sidebar-nav">
                    <ul>
                        <li class="active">
                            <a href="#products" onclick="showSection('products')">
                                <i class="fas fa-car"></i> Quản lý sản phẩm
                            </a>
                        </li>
                        <li>
                            <a href="#dashboard" onclick="showSection('dashboard')">
                                <i class="fas fa-dashboard"></i> Thống kê
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>

            <div class="admin-content">
                <!-- Quản lý sản phẩm -->
                <section id="products-section" class="content-section active">
                    <div class="section-header">
                        <h2>Quản lý sản phẩm</h2>
                        <button onclick="showAddProductModal()" class="add-btn">
                            <i class="fas fa-plus"></i> Thêm sản phẩm mới
                        </button>
                    </div>

                    <div class="products-grid" id="products-grid">
                        <!-- Danh sách sản phẩm sẽ được hiển thị ở đây -->
                    </div>
                </section>

                <!-- Thống kê -->
                <section id="dashboard-section" class="content-section">
                    <h2>Thống kê</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-car"></i>
                            <div class="stat-info">
                                <h3 id="total-products">0</h3>
                                <p>Tổng sản phẩm</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-eye"></i>
                            <div class="stat-info">
                                <h3 id="total-views">0</h3>
                                <p>Lượt xem</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal thêm sản phẩm -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Thêm sản phẩm mới</h3>
                <span class="close" onclick="closeAddProductModal()">&times;</span>
            </div>
            <form id="addProductForm">
                <div class="form-group">
                    <label for="productName">Tên sản phẩm:</label>
                    <input type="text" id="productName" name="productName" required>
                </div>
                
                <div class="form-group">
                    <label for="productBrand">Thương hiệu:</label>
                    <select id="productBrand" name="productBrand" required>
                        <option value="">Chọn thương hiệu</option>
                        <option value="toyota">Toyota</option>
                        <option value="mercedes">Mercedes</option>
                        <option value="bmw">BMW</option>
                        <option value="audi">Audi</option>
                        <option value="lexus">Lexus</option>
                        <option value="honda">Honda</option>
                        <option value="hyundai">Hyundai</option>
                        <option value="kia">KIA</option>
                        <option value="vinfast">Vinfast</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="productPrice">Giá (VNĐ):</label>
                    <input type="number" id="productPrice" name="productPrice" required min="0">
                </div>

                <div class="form-group">
                    <label for="productYear">Năm sản xuất:</label>
                    <input type="number" id="productYear" name="productYear" required min="2000" max="2025">
                </div>

                <div class="form-group">
                    <label for="productFuel">Loại nhiên liệu:</label>
                    <select id="productFuel" name="productFuel" required>
                        <option value="">Chọn loại nhiên liệu</option>
                        <option value="Xăng">Xăng</option>
                        <option value="Dầu">Dầu</option>
                        <option value="Hybrid">Hybrid</option>
                        <option value="Điện">Điện</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="productTransmission">Hộp số:</label>
                    <select id="productTransmission" name="productTransmission" required>
                        <option value="">Chọn hộp số</option>
                        <option value="Số tự động">Số tự động</option>
                        <option value="Số sàn">Số sàn</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="productImage">Hình ảnh:</label>
                    <input type="file" id="productImage" name="productImage" accept="image/*" onchange="previewImage(this)">
                    <div id="imagePreview" style="margin-top: 10px; display: none;">
                        <img id="previewImg" src="" alt="Preview" style="max-width: 200px; max-height: 150px; border-radius: 8px; border: 1px solid #ddd;">
                    </div>
                    <small>Hoặc nhập URL hình ảnh:</small>
                    <input type="url" id="productImageUrl" name="productImageUrl" placeholder="https://example.com/image.jpg" onchange="previewUrlImage(this)">
                </div>

                <div class="form-group">
                    <label for="productDescription">Mô tả:</label>
                    <textarea id="productDescription" name="productDescription" rows="4"></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" onclick="closeAddProductModal()" class="cancel-btn">Hủy</button>
                    <button type="submit" class="save-btn">Lưu sản phẩm</button>
                </div>
            </form>
        </div>
    </div>

    <script src="assets/js/admin.js"></script>
    <script>
        // Function để quay về trang chủ
        function goToHomePage() {
            window.location.href = 'index.html';
        }

        // Kiểm tra đăng nhập khi load trang
        document.addEventListener('DOMContentLoaded', function() {
            if (!localStorage.getItem('adminLoggedIn')) {
                window.location.href = 'admin-login.html';
                return;
            }
            
            const username = localStorage.getItem('adminUsername');
            if (username) {
                document.getElementById('admin-welcome').textContent = `Xin chào, ${username}!`;
            }
            
            loadProducts();
            updateStats();
        });
    </script>
</body>
</html>